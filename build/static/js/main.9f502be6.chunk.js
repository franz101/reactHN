(this["webpackJsonpreact-hn"]=this["webpackJsonpreact-hn"]||[]).push([[0],{103:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(19),o=n.n(c),i=(n(44),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/)));function l(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var s=n(11),u=n(13),m=n(7),d=n(4),f=n.n(d),p=n(12),h=n(37),b={0:"CULTURE & ARTS",1:"EDUCATION",2:"BUSINESS",3:"HEALTH & LIVING",4:"SPORTS",5:"NEWS & POLITICS",6:"TECH & SCIENCE"},g=function(e){return 64*Math.floor(e/64)},E=function(e,t){for(var n=t.split(","),a=[],r={};n.length;)a.push(n.splice(0,8));a.reverse();for(var c=0,o=a;c<o.length;c++){var i=o[c];r[e+parseFloat(i[0])]=i.slice(1)}return r},v="https://node-hnapi.herokuapp.com/",w={getCollection:function(e,t){return new Promise((function(n,a){fetch("".concat(v).concat(e,"?page=").concat(t)).then((function(e){return e.json()})).then((function(e){n(e)})).catch((function(e){a(e)}))}))},getItem:function(e){return new Promise((function(t,n){fetch("".concat(v,"item/").concat(e)).then((function(e){return e.json()})).then((function(e){t(e)})).catch((function(e){n(e)}))}))},getUser:function(e){return new Promise((function(t,n){fetch("".concat(v,"user/").concat(e)).then((function(e){return e.json()})).then((function(e){t(e)})).catch((function(e){n(e)}))}))},getCategoryForIdCached:function(){var e=Object(p.a)(f.a.mark((function e(t){var n,a,r,c,o,i;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=g(t),e.next=3,new Promise((function(e,t){fetch("https://franz101.github.io/hn_topic_data/predictions/export/".concat(n,".csv"),{method:"GET",mode:"cors",credentials:"omit"}).then((function(e){return e.text()})).then((function(t){e(t)})).catch((function(e){t(e)}))}));case 3:return a=e.sent,r=E(n,a),c=r[t],o=Math.max.apply(Math,Object(h.a)(c)),i=c.indexOf(o+""),e.abrupt("return",b[i]+" ("+o+"%)");case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),getCategory:function(e){return new Promise((function(t,n){fetch("http://127.0.0.1:8000/category",{method:"POST",mode:"cors",credentials:"omit",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({text:e})}).then((function(e){return e.json()})).then((function(e){console.log(e),t(e.category.slice(0,2).join(", "))})).catch((function(e){n(e)}))}))}},y=Object(u.b)({name:"collections",initialState:{news:[],show:[],ask:[],newest:[],jobs:[],isFetching:!1},reducers:{requestList:function(e){e.isFetching=!0},receiveList:function(e,t){var n=t.payload,a=n.type,r=n.data;e.isFetching=!1,e[a]=r}}}),x=y.actions,k=x.requestList,N=x.receiveList,j=y.reducer,O=Object(u.b)({name:"items",initialState:{isFetching:!1,item:{}},reducers:{requestItem:function(e){e.isFetching=!0},receiveItem:function(e,t){var n=t.payload,a=(n.id,n.data);e.isFetching=!1,e.item=a}}}),S=O.actions,C=S.requestItem,F=S.receiveItem,I=O.reducer,T=Object(u.b)({name:"item",initialState:{isFetching:!1,user:{}},reducers:{requestUser:function(e){e.isFetching=!0},receiveUser:function(e,t){e.isFetching=!1,e.user=t.payload}}}),R=T.actions,U=R.requestUser,H=R.receiveUser,L=T.reducer,P=Object(m.c)({collections:j,items:I,user:L}),_=Object(u.a)({reducer:P}),A=n(3),W=n(2),z=n(35),q=n.n(z),M=function(e){return{__html:q.a.sanitize(e)}},B=function(){window.scrollTo(0,0)},G=function(e){return"job"===e.type?"":e.comments_count>0?"".concat(e.comments_count," ").concat(1===e.comments_count?"comment ":"comments "):"discuss"},J=function(e){return"/item/".concat(e.id)},D=function(e){return function(e){try{return new URL(e),!0}catch(t){return!1}}(e.url)?e.url:J(e)},V=function(e){document.title="".concat(e?K(e)+" - ":""," React HN")},K=function(e){return e.charAt(0).toUpperCase()+e.slice(1)},Y=n(38),$=function(e){var t=e.data,n=e.index,c=e.page,o=e.perPage||30,i=n+1+(Number(c)-1)*o,l=G(t),s=Object(a.useState)("loading..."),u=Object(Y.a)(s,2),m=u[0],d=u[1];return Object(a.useEffect)((function(){var e=function(){var e=Object(p.a)(f.a.mark((function e(){var n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,w.getCategoryForIdCached(t.id);case 3:n=e.sent,d(n),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),d("failed");case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();try{e()}catch(n){d("error")}}),[t.id]),r.a.createElement("div",{className:"flex py-4 border-solid border-gray-100 dark:border-b-0 border-b"},r.a.createElement("div",{className:"flex content-center items-center justify-center text-gray-600 dark:text-gray-100",style:{flexBasis:"3rem",flexShrink:0}},i),r.a.createElement("div",{className:"w-full pl-1"},r.a.createElement("div",{className:"mb-1"},function(e){return r.a.createElement("a",{href:D(e),className:"bg-blue-150 hover:bg-blue-500 dark:bg-blue-100 rounded-sm p-1 break-words visited:bg-white hover:text-gray-700 dark:text-gray-100 dark-hover:text-gray-700"},e.title,"\xa0",e.domain&&r.a.createElement("span",{className:"break-words"},"(",e.domain,")"))}(t)),r.a.createElement("div",{className:"pl-1 text-sm text-gray-700 dark:text-gray-300"},t.points&&r.a.createElement("span",null,t.points," ",1===t.points?"point ":"points ","by\xa0",r.a.createElement(A.b,{to:"/user/".concat(t.user),className:"hover:underline"},t.user),"\xa0"),r.a.createElement("span",{className:"md:inline-block"},r.a.createElement(A.b,{to:J(t),className:"hover:underline"},t.time_ago)),r.a.createElement(a.Fragment,null,r.a.createElement("div",{className:"hidden md:inline"},"\xa0|\xa0"),m),l&&r.a.createElement(a.Fragment,null,r.a.createElement("div",{className:"hidden md:inline"},"\xa0|\xa0"),r.a.createElement("div",{className:"md:inline-block"},r.a.createElement(A.b,{to:J(t),className:"hover:underline"},l))))))},Q=function(){return r.a.createElement("div",{style:{position:"fixed",top:"50%",left:"50%",fontSize:"2rem"}},r.a.createElement("span",{role:"img","aria-label":"loading\u2026"},"\ud83d\ude48"))},X=function(e){var t=Number(e.page),n="/".concat(e.type,"/").concat(t-1>1?t-1:1),a="/".concat(e.type,"/").concat(t+1);return r.a.createElement("div",{className:"bg-white dark:bg-gray-600 p-3 flex text-center dark:text-white",style:{lineHeight:"1"}},r.a.createElement(A.b,{to:n,onClick:function(){return B()},className:"flex-1 inline-block text-gray-600 dark:text-white p-3 hover:text-blue-500 border-transparent border-b-2"},t>1?"prev":""),r.a.createElement("span",{className:"p-3 flex-1"},"\xa0",t||1," / ",10,"\xa0"),r.a.createElement(A.b,{to:a,onClick:function(){return B()},className:"flex-1 inline-block text-gray-600 dark:text-white p-3 hover:text-blue-500 border-transparent border-b-2"},10!==t?"more":""))},Z=function(e){var t=e.type,n=e.collection,a=e.isFetching,c=e.path,o=e.page,i=(void 0===o?"1":o).toString()||"1",l=function(e,t){return e.map((function(e,n){return r.a.createElement("li",{key:n},r.a.createElement($,{key:n,index:n,data:e,page:i,perPage:t}))}))};return r.a.createElement("div",null,function(e){if(a)return r.a.createElement(Q,null);if(e.length>0)return r.a.createElement("div",null,(o=e,s=e.length,r.a.createElement("div",null,r.a.createElement("ol",null,l(o,s)))),r.a.createElement("div",{className:"my-4"},r.a.createElement(X,{page:i||"1",type:t})));if(!a&&c){var n=c.replace(":page?",(Number(i)-1).toString());return r.a.createElement("div",{className:"p-4 bg-white dark:bg-gray-500"},r.a.createElement("p",null,"There's nothing to show here\u2026"),r.a.createElement("a",{href:n},"Try the previous page?"))}var o,s}(n))},ee=function(e){var t=e.type,n=Object(W.g)(),c=n.path,o=n.page,i=Object(s.c)((function(e){return e})).collections,l=Object(s.b)(),u=(null===o||void 0===o?void 0:o.toString())||"1";return Object(a.useEffect)((function(){B()}),[]),Object(a.useEffect)((function(){V("news"===t?"Top":t),l(function(e,t){return function(){var n=Object(p.a)(f.a.mark((function n(a){return f.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:a(k()),w.getCollection(e,t).then((function(t){a(N({type:e,data:t}))})).catch((function(e){console.error(e)}));case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()}(t,u))}),[t,u,l]),Number(o)>10&&c?r.a.createElement(W.a,{to:c.replace(":page","10")}):r.a.createElement(Z,{type:t,collection:i[t],isFetching:i.isFetching,page:Number(o)||1,path:c})},te=function(e){var t=e.data;return r.a.createElement("div",{style:{minWidth:"15rem",paddingLeft:t.level<50?"".concat(t.level/2,"rem"):0}},r.a.createElement("div",{className:"mb-4"},r.a.createElement("div",{className:"text-gray-600 dark:text-gray-300 mb-2 flex flex-wrap"},r.a.createElement(A.b,{className:"underline pb-4 break-all sm:break-normal",to:"/user/".concat(t.user)},t.user),"\xa0",r.a.createElement(A.b,{className:"hover:underline pb-4",to:J(t)},r.a.createElement("span",{className:""},t.time_ago))),r.a.createElement("div",{className:"overflow-x-auto",dangerouslySetInnerHTML:M(t.content)})),t.comments.length>0?r.a.createElement(ne,{data:t.comments}):"")},ne=function(e){var t=e.data;return r.a.createElement("ul",{className:"comments__list"},t.map((function(e,t){return r.a.createElement("li",{key:t,className:"comments__listItem"},r.a.createElement(te,{data:e}))})))},ae=function(e){var t,n=e.item,c=e.isFetching,o=G(n);return r.a.createElement("div",null,(t=n,r.a.createElement("div",{className:c?"opacity-25":""},function(e){return e&&e.comments?r.a.createElement("div",{className:"p-4 dark:p-1 dark:px-2 bg-white dark:bg-gray-600"},r.a.createElement("h1",{className:"text-2xl font-bold mb-4"},r.a.createElement("a",{className:"bg-blue-100 hover:bg-blue-150 rounded-sm p-1 -m-1 inline-flex items-center flex-wrap break-all sm:break-normal visited:bg-white dark:text-gray-100 dark:hover:text-gray-700",href:D(e)},r.a.createElement("span",null,e.title),e.domain&&r.a.createElement(a.Fragment,null,"\xa0",r.a.createElement("span",{className:"text-base"},"(",e.domain,")")))),r.a.createElement("div",{className:"text-gray-600 dark:text-gray-300"},e.points&&r.a.createElement("span",null,r.a.createElement("span",{className:"break-all sm:break-normal"},e.points," ",1===e.points?"point ":"points ",r.a.createElement("span",null,"by")," ",r.a.createElement(A.b,{className:"dark:underline",to:"/user/".concat(e.user)},e.user),o&&r.a.createElement("span",{className:"inline-block"},"\xa0",o)))),r.a.createElement("div",{className:"mt-3",dangerouslySetInnerHTML:M(e.content)})):c?void 0:r.a.createElement("p",null,"Nothing to show\u2026")}(t),t.comments&&t.comments.length>0?function(e){return r.a.createElement("div",{className:"my-4 py-2 px-4 dark:px-2 bg-white dark:bg-gray-600 overflow-x-auto"},r.a.createElement(ne,{data:e.comments}))}(t):"")))},re=function(e){var t;return r.a.createElement("div",null,e.isFetching?r.a.createElement(Q,null):(t=e.user,r.a.createElement("div",{className:"bg-white dark:bg-gray-600 p-1"},r.a.createElement("h1",{className:"text-2xl font-bold mb-3 text-gray-600 dark:text-white"},t.id),r.a.createElement("div",{className:"mb-3 text-gray-600 dark:text-white"},r.a.createElement("div",null,r.a.createElement("span",{className:"font-bold"},"Created:"),"\xa0",t.created),r.a.createElement("div",null,r.a.createElement("span",{className:"font-bold"},"Karma:"),"\xa0",t.karma," ",function(e){if(void 0!==e){var t=function(e){var t=e.toString().length;return e>100?{label:"great rating",icon:"\ud83d\udd25".repeat(t)}:e<0?{label:"bad rating",icon:"\ud83d\udca9".repeat(t-1)}:0!==e&&e?{label:"good rating",icon:"\ud83d\udc4d".repeat(t)}:{label:"new user",icon:"\ud83c\udd95"}}(e);return r.a.createElement("span",{role:"img","aria-label":"".concat(t.label),title:t.label},t.icon)}}(t.karma))),r.a.createElement("div",{className:"text-gray-600 dark:text-white",dangerouslySetInnerHTML:M(t.about)}))))},ce=[{dest:"/news",label:"top"},{dest:"/newest",label:"new"},{dest:"/show",label:"show"},{dest:"/ask",label:"ask"},{dest:"/jobs",label:"jobs"}],oe="inline-block text-white p-3 hover:text-blue-500 border-transparent border-b-2",ie=function(){return r.a.createElement("nav",{className:"sm:sticky top-0 bg-black-600",onClick:function(){return B()}},r.a.createElement("div",{className:"max-w-screen-lg mx-auto"},r.a.createElement("ul",{className:"flex flex-col sm:flex-row items-center flex-wrap"},ce.map((function(e,t){return r.a.createElement("li",{key:t},r.a.createElement(A.c,{to:e.dest,className:oe,activeClassName:"border-blue-500 text-blue-500"},e.label))})),r.a.createElement("li",{className:"sm:ml-auto"},r.a.createElement(A.c,{to:"/about",className:oe,activeClassName:"border-blue-500 text-blue-500"},"about")))))},le=n(36),se=n.n(le),ue=r.a.createElement(s.a,{store:_},r.a.createElement(A.a,null,r.a.createElement("div",null,r.a.createElement(ie,null),r.a.createElement("main",null,r.a.createElement("div",{className:"max-w-screen-lg my-4 mx-auto"},r.a.createElement(W.d,null,r.a.createElement(W.b,{exact:!0,path:"/",component:function(){return r.a.createElement(W.a,{to:"/news/1"})}}),r.a.createElement(W.b,{path:"/item/:id",component:function(){var e=Object(W.g)().id,t=Object(s.b)(),n=Object(s.c)((function(e){return e.items})),c=n.item,o=n.isFetching;return Object(a.useEffect)((function(){B()}),[]),Object(a.useEffect)((function(){e&&t(function(e){return function(){var t=Object(p.a)(f.a.mark((function t(n){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n(C()),w.getItem(e).then((function(t){n(F({id:e,data:t}))})).catch((function(e){console.error(e)}));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(e))}),[e,t]),Object(a.useEffect)((function(){c&&c.title&&V(c.title)}),[c]),r.a.createElement(ae,{item:c,isFetching:o})}}),r.a.createElement(W.b,{path:"/user/:id",component:function(){var e=Object(s.b)(),t=Object(W.g)().id,n=Object(s.c)((function(e){return e})).user;return Object(a.useEffect)((function(){t&&e(function(e){return function(){var t=Object(p.a)(f.a.mark((function t(n){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n(U()),w.getUser(e).then((function(e){n(H(e))})).catch((function(e){console.error(e)}));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(t))}),[t,e]),r.a.createElement(re,{user:n.user,isFetching:n.isFetching})}}),r.a.createElement(W.b,{path:"/news/:page?",render:function(e){return r.a.createElement(ee,Object.assign({},e,{type:"news"}))}}),r.a.createElement(W.b,{path:"/newest/:page?",render:function(e){return r.a.createElement(ee,Object.assign({},e,{type:"newest"}))}}),r.a.createElement(W.b,{path:"/show/:page?",render:function(e){return r.a.createElement(ee,Object.assign({},e,{type:"show"}))}}),r.a.createElement(W.b,{path:"/ask/:page?",render:function(e){return r.a.createElement(ee,Object.assign({},e,{type:"ask"}))}}),r.a.createElement(W.b,{path:"/jobs/:page?",render:function(e){return r.a.createElement(ee,Object.assign({},e,{type:"jobs"}))}}),r.a.createElement(W.b,{exact:!0,path:"/about",component:function(){return Object(a.useEffect)((function(){V("about")})),r.a.createElement("div",{className:"About"},r.a.createElement(se.a,{source:"# React Hacker News\n\nYet another React Hacker News clone\n\n[![Commitizen friendly](https://img.shields.io/badge/commitizen-friendly-brightgreen.svg)](http://commitizen.github.io/cz-cli/)\n\n**Demo:** [https://ya-react-hn.vercel.app](https://ya-react-hn.vercel.app)\n\nFeaturing:\n\n- [React 16](https://reactjs.org/)\n- [React Router 4](https://reacttraining.com/react-router)\n- [React Redux](https://redux.js.org/docs/basics/UsageWithReact.html)\n- [Redux Thunk](https://github.com/gaearon/redux-thunk)\n- [HN API](https://github.com/cheeaun/node-hnapi)\n- unread link highlighting\n- clickable links in comments\n- dark mode\n- TailwindCSS\n- Storybook\n- playroom\n"}),r.a.createElement("p",{className:"dark:text-white"},"View the source code on ",r.a.createElement("a",{className:"dark:hover:text-gray-700",href:"https://github.com/ptibbetts/reactHN"},"GitHub")),r.a.createElement("p",{className:"dark:text-white"},r.a.createElement("a",{className:"<3",href:"https://paultibbetts.uk"},r.a.createElement("span",{role:"img","aria-label":"love"},"\ud83d\udc99"))))}}),r.a.createElement(W.b,{component:function(e){var t=e.location;return r.a.createElement("h1",{className:"font-bold text-gray-700 dark:text-white text-2xl"},'Nothing was found for "',t.pathname,'".')}})))))));o.a.render(ue,document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/reactHN/build",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("/reactHN/build","/service-worker.js");i?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var a=n.headers.get("content-type");404===n.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):l(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):l(t,e)}))}}()},39:function(e,t,n){e.exports=n(103)},44:function(e,t,n){}},[[39,1,2]]]);
//# sourceMappingURL=main.9f502be6.chunk.js.map