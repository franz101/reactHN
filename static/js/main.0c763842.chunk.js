(this["webpackJsonpreact-hn"]=this["webpackJsonpreact-hn"]||[]).push([[0],{104:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(19),o=n.n(c),i=(n(45),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/)));function s(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var l=n(12),u=n(13),m=n(8),d=n(2),f=n.n(d),p=n(6),h=n(36),b=n(27),g={0:"CULTURE & ARTS",1:"EDUCATION",2:"BUSINESS",3:"HEALTH & LIVING",4:"SPORTS",5:"NEWS & POLITICS",6:"TECH & SCIENCE"},v=function(e){return 64*Math.floor(e/64)},E=function(e,t){for(var n=t.split(","),a=[],r={};n.length;)a.push(n.splice(0,8));a.reverse();for(var c=0,o=a;c<o.length;c++){var i=o[c];r[e+parseFloat(i[0])]=i.slice(1)}return r},x=function(){var e=Object(p.a)(f.a.mark((function e(t){var n,a,r,c,o,i;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=v(t),e.next=3,new Promise((function(e,t){fetch("https://franz101.github.io/hn_topic_data/predictions/export/".concat(n,".csv"),{method:"GET",mode:"cors",credentials:"omit"}).then((function(e){return e.text()})).then((function(t){e(t)})).catch((function(e){t(e)}))}));case 3:return a=e.sent,r=E(n,a),c=r[t],o=Math.max.apply(Math,Object(b.a)(c)),i=c.indexOf(o+""),e.abrupt("return",g[i]+" ("+o+"%)");case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),w=function(){var e=Object(p.a)(f.a.mark((function e(t){var n,a,r,c,o,i;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=v(t),e.next=3,new Promise((function(e,t){fetch("https://franz101.github.io/hn_topic_data/predictions/export/".concat(n,".csv"),{method:"GET",mode:"cors",credentials:"omit"}).then((function(e){return e.text()})).then((function(t){e(t)})).catch((function(e){t(e)}))}));case 3:return a=e.sent,r=E(n,a),c=r[t],o=Math.max.apply(Math,Object(b.a)(c)),i=c.indexOf(o+""),e.abrupt("return",i);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),y="https://node-hnapi.herokuapp.com/",k={getCollection:function(e,t){return new Promise((function(n,a){fetch("".concat(y).concat(e,"?page=").concat(t)).then((function(e){return e.json()})).then((function(e){n(e)})).catch((function(e){a(e)}))}))},getItem:function(e){return new Promise((function(t,n){fetch("".concat(y,"item/").concat(e)).then((function(e){return e.json()})).then((function(e){t(e)})).catch((function(e){n(e)}))}))},getUser:function(e){return new Promise((function(t,n){fetch("".concat(y,"user/").concat(e)).then((function(e){return e.json()})).then((function(e){t(e)})).catch((function(e){n(e)}))}))},getCollectionByCategory:function(){var e=Object(p.a)(f.a.mark((function e(t,n){var a,r,c,o,i,s,l,u,m,d,p;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("business"===t){e.next=2;break}return e.abrupt("return",[]);case 2:a=parseInt(n),r=function(e){return new Promise((function(t,n){fetch("".concat(y,"news?page=").concat(e)).then((function(e){return e.json()})).then((function(e){t(e)})).catch((function(e){n(e)}))}))},c=[];case 5:if(!(c.length<10)){e.next=54;break}return e.next=8,r(a);case 8:o=e.sent,i=!0,s=!1,e.prev=11,u=Object(h.a)(o);case 13:return e.next=15,u.next();case 15:return m=e.sent,i=m.done,e.next=19,m.value;case 19:if(d=e.sent,i){e.next=35;break}return p=d,e.prev=22,e.next=25,w(p.id);case 25:2===e.sent&&c.push(p),e.next=32;break;case 29:e.prev=29,e.t0=e.catch(22),console.log(p.id,"not found");case 32:i=!0,e.next=13;break;case 35:e.next=41;break;case 37:e.prev=37,e.t1=e.catch(11),s=!0,l=e.t1;case 41:if(e.prev=41,e.prev=42,i||null==u.return){e.next=46;break}return e.next=46,u.return();case 46:if(e.prev=46,!s){e.next=49;break}throw l;case 49:return e.finish(46);case 50:return e.finish(41);case 51:a++,e.next=5;break;case 54:return e.abrupt("return",c);case 55:case"end":return e.stop()}}),e,null,[[11,37,41,51],[22,29],[42,,46,50]])})));return function(t,n){return e.apply(this,arguments)}}(),getCategoryForIdCached:x,getCategory:function(e){return new Promise((function(t,n){fetch("http://127.0.0.1:8000/category",{method:"POST",mode:"cors",credentials:"omit",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({text:e})}).then((function(e){return e.json()})).then((function(e){console.log(e),t(e.category.slice(0,2).join(", "))})).catch((function(e){n(e)}))}))}},N=Object(u.b)({name:"collections",initialState:{news:[],show:[],ask:[],newest:[],jobs:[],business:[],isFetching:!1},reducers:{requestList:function(e){e.isFetching=!0},receiveList:function(e,t){var n=t.payload,a=n.type,r=n.data;e.isFetching=!1,e[a]=r}}}),j=N.actions,O=j.requestList,S=j.receiveList,C=N.reducer,F=Object(u.b)({name:"items",initialState:{isFetching:!1,item:{}},reducers:{requestItem:function(e){e.isFetching=!0},receiveItem:function(e,t){var n=t.payload,a=(n.id,n.data);e.isFetching=!1,e.item=a}}}),I=F.actions,T=I.requestItem,R=I.receiveItem,H=F.reducer,U=Object(u.b)({name:"item",initialState:{isFetching:!1,user:{}},reducers:{requestUser:function(e){e.isFetching=!0},receiveUser:function(e,t){e.isFetching=!1,e.user=t.payload}}}),L=U.actions,P=L.requestUser,_=L.receiveUser,A=U.reducer,W=Object(m.c)({collections:C,items:H,user:A}),z=Object(u.a)({reducer:W}),M=n(4),q=n(3),B=n(37),G=n.n(B),J=function(e){return{__html:G.a.sanitize(e)}},D=function(){window.scrollTo(0,0)},V=function(e){return"job"===e.type?"":e.comments_count>0?"".concat(e.comments_count," ").concat(1===e.comments_count?"comment ":"comments "):"discuss"},K=function(e){return"/item/".concat(e.id)},Y=function(e){return function(e){try{return new URL(e),!0}catch(t){return!1}}(e.url)?e.url:K(e)},$=function(e){document.title="".concat(e?Q(e)+" - ":""," React HN")},Q=function(e){return e.charAt(0).toUpperCase()+e.slice(1)},X=n(39),Z=function(e){var t=e.data,n=e.index,c=e.page,o=e.perPage||30,i=n+1+(Number(c)-1)*o,s=V(t),l=Object(a.useState)("loading..."),u=Object(X.a)(l,2),m=u[0],d=u[1];return Object(a.useEffect)((function(){var e=function(){var e=Object(p.a)(f.a.mark((function e(){var n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k.getCategoryForIdCached(t.id);case 3:n=e.sent,d(n),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),d("failed");case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();try{e()}catch(n){d("error")}}),[t.id]),r.a.createElement("div",{className:"flex py-4 border-solid border-gray-100 dark:border-b-0 border-b"},r.a.createElement("div",{className:"flex content-center items-center justify-center text-gray-600 dark:text-gray-100",style:{flexBasis:"3rem",flexShrink:0}},i),r.a.createElement("div",{className:"w-full pl-1"},r.a.createElement("div",{className:"mb-1"},function(e){return r.a.createElement("a",{href:Y(e),className:"bg-blue-150 hover:bg-blue-500 dark:bg-blue-100 rounded-sm p-1 break-words visited:bg-white hover:text-gray-700 dark:text-gray-100 dark-hover:text-gray-700"},e.title,"\xa0",e.domain&&r.a.createElement("span",{className:"break-words"},"(",e.domain,")"))}(t)),r.a.createElement("div",{className:"pl-1 text-sm text-gray-700 dark:text-gray-300"},t.points&&r.a.createElement("span",null,t.points," ",1===t.points?"point ":"points ","by\xa0",r.a.createElement(M.b,{to:"/user/".concat(t.user),className:"hover:underline"},t.user),"\xa0"),r.a.createElement("span",{className:"md:inline-block"},r.a.createElement(M.b,{to:K(t),className:"hover:underline"},t.time_ago)),r.a.createElement(a.Fragment,null,r.a.createElement("div",{className:"hidden md:inline"},"\xa0|\xa0"),m),s&&r.a.createElement(a.Fragment,null,r.a.createElement("div",{className:"hidden md:inline"},"\xa0|\xa0"),r.a.createElement("div",{className:"md:inline-block"},r.a.createElement(M.b,{to:K(t),className:"hover:underline"},s))))))},ee=function(){return r.a.createElement("div",{style:{position:"fixed",top:"50%",left:"50%",fontSize:"2rem"}},r.a.createElement("span",{role:"img","aria-label":"loading\u2026"},"\ud83d\ude48"))},te=function(e){var t=Number(e.page),n="/".concat(e.type,"/").concat(t-1>1?t-1:1),a="/".concat(e.type,"/").concat(t+1);return r.a.createElement("div",{className:"bg-white dark:bg-gray-600 p-3 flex text-center dark:text-white",style:{lineHeight:"1"}},r.a.createElement(M.b,{to:n,onClick:function(){return D()},className:"flex-1 inline-block text-gray-600 dark:text-white p-3 hover:text-blue-500 border-transparent border-b-2"},t>1?"prev":""),r.a.createElement("span",{className:"p-3 flex-1"},"\xa0",t||1," / ",10,"\xa0"),r.a.createElement(M.b,{to:a,onClick:function(){return D()},className:"flex-1 inline-block text-gray-600 dark:text-white p-3 hover:text-blue-500 border-transparent border-b-2"},10!==t?"more":""))},ne=function(e){var t=e.type,n=e.collection,a=e.isFetching,c=e.path,o=e.page,i=(void 0===o?"1":o).toString()||"1",s=function(e,t){return e.map((function(e,n){return r.a.createElement("li",{key:n},r.a.createElement(Z,{key:n,index:n,data:e,page:i,perPage:t}))}))};return r.a.createElement("div",null,function(e){if(a)return r.a.createElement(ee,null);if(e.length>0)return r.a.createElement("div",null,(o=e,l=e.length,r.a.createElement("div",null,r.a.createElement("ol",null,s(o,l)))),r.a.createElement("div",{className:"my-4"},r.a.createElement(te,{page:i||"1",type:t})));if(!a&&c){var n=c.replace(":page?",(Number(i)-1).toString());return r.a.createElement("div",{className:"p-4 bg-white dark:bg-gray-500"},r.a.createElement("p",null,"There's nothing to show here\u2026"),r.a.createElement("a",{href:n},"Try the previous page?"))}var o,l}(n))},ae=function(e){var t=e.type,n=Object(q.g)(),c=n.path,o=n.page,i=Object(l.c)((function(e){return e})).collections,s=Object(l.b)(),u=(null===o||void 0===o?void 0:o.toString())||"1";return Object(a.useEffect)((function(){D()}),[]),Object(a.useEffect)((function(){$("news"===t?"Top":t),s("business"===t?function(e,t){return function(){var n=Object(p.a)(f.a.mark((function n(a){return f.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:a(O()),k.getCollectionByCategory(e,t).then((function(t){a(S({type:e,data:t}))})).catch((function(e){console.error(e)}));case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()}(t,u):function(e,t){return function(){var n=Object(p.a)(f.a.mark((function n(a){return f.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:a(O()),k.getCollection(e,t).then((function(t){a(S({type:e,data:t}))})).catch((function(e){console.error(e)}));case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()}(t,u))}),[t,u,s]),Number(o)>10&&c?r.a.createElement(q.a,{to:c.replace(":page","10")}):r.a.createElement(ne,{type:t,collection:i[t],isFetching:i.isFetching,page:Number(o)||1,path:c})},re=function(e){var t=e.data;return r.a.createElement("div",{style:{minWidth:"15rem",paddingLeft:t.level<50?"".concat(t.level/2,"rem"):0}},r.a.createElement("div",{className:"mb-4"},r.a.createElement("div",{className:"text-gray-600 dark:text-gray-300 mb-2 flex flex-wrap"},r.a.createElement(M.b,{className:"underline pb-4 break-all sm:break-normal",to:"/user/".concat(t.user)},t.user),"\xa0",r.a.createElement(M.b,{className:"hover:underline pb-4",to:K(t)},r.a.createElement("span",{className:""},t.time_ago))),r.a.createElement("div",{className:"overflow-x-auto",dangerouslySetInnerHTML:J(t.content)})),t.comments.length>0?r.a.createElement(ce,{data:t.comments}):"")},ce=function(e){var t=e.data;return r.a.createElement("ul",{className:"comments__list"},t.map((function(e,t){return r.a.createElement("li",{key:t,className:"comments__listItem"},r.a.createElement(re,{data:e}))})))},oe=function(e){var t,n=e.item,c=e.isFetching,o=V(n);return r.a.createElement("div",null,(t=n,r.a.createElement("div",{className:c?"opacity-25":""},function(e){return e&&e.comments?r.a.createElement("div",{className:"p-4 dark:p-1 dark:px-2 bg-white dark:bg-gray-600"},r.a.createElement("h1",{className:"text-2xl font-bold mb-4"},r.a.createElement("a",{className:"bg-blue-100 hover:bg-blue-150 rounded-sm p-1 -m-1 inline-flex items-center flex-wrap break-all sm:break-normal visited:bg-white dark:text-gray-100 dark:hover:text-gray-700",href:Y(e)},r.a.createElement("span",null,e.title),e.domain&&r.a.createElement(a.Fragment,null,"\xa0",r.a.createElement("span",{className:"text-base"},"(",e.domain,")")))),r.a.createElement("div",{className:"text-gray-600 dark:text-gray-300"},e.points&&r.a.createElement("span",null,r.a.createElement("span",{className:"break-all sm:break-normal"},e.points," ",1===e.points?"point ":"points ",r.a.createElement("span",null,"by")," ",r.a.createElement(M.b,{className:"dark:underline",to:"/user/".concat(e.user)},e.user),o&&r.a.createElement("span",{className:"inline-block"},"\xa0",o)))),r.a.createElement("div",{className:"mt-3",dangerouslySetInnerHTML:J(e.content)})):c?void 0:r.a.createElement("p",null,"Nothing to show\u2026")}(t),t.comments&&t.comments.length>0?function(e){return r.a.createElement("div",{className:"my-4 py-2 px-4 dark:px-2 bg-white dark:bg-gray-600 overflow-x-auto"},r.a.createElement(ce,{data:e.comments}))}(t):"")))},ie=function(e){var t;return r.a.createElement("div",null,e.isFetching?r.a.createElement(ee,null):(t=e.user,r.a.createElement("div",{className:"bg-white dark:bg-gray-600 p-1"},r.a.createElement("h1",{className:"text-2xl font-bold mb-3 text-gray-600 dark:text-white"},t.id),r.a.createElement("div",{className:"mb-3 text-gray-600 dark:text-white"},r.a.createElement("div",null,r.a.createElement("span",{className:"font-bold"},"Created:"),"\xa0",t.created),r.a.createElement("div",null,r.a.createElement("span",{className:"font-bold"},"Karma:"),"\xa0",t.karma," ",function(e){if(void 0!==e){var t=function(e){var t=e.toString().length;return e>100?{label:"great rating",icon:"\ud83d\udd25".repeat(t)}:e<0?{label:"bad rating",icon:"\ud83d\udca9".repeat(t-1)}:0!==e&&e?{label:"good rating",icon:"\ud83d\udc4d".repeat(t)}:{label:"new user",icon:"\ud83c\udd95"}}(e);return r.a.createElement("span",{role:"img","aria-label":"".concat(t.label),title:t.label},t.icon)}}(t.karma))),r.a.createElement("div",{className:"text-gray-600 dark:text-white",dangerouslySetInnerHTML:J(t.about)}))))},se=[{dest:"/news",label:"top"},{dest:"/newest",label:"new"},{dest:"/show",label:"show"},{dest:"/ask",label:"ask"},{dest:"/jobs",label:"jobs"},{dest:"/business",label:"business"}],le="inline-block text-white p-3 hover:text-blue-500 border-transparent border-b-2",ue=function(){return r.a.createElement("nav",{className:"sm:sticky top-0 bg-black-600",onClick:function(){return D()}},r.a.createElement("div",{className:"max-w-screen-lg mx-auto"},r.a.createElement("ul",{className:"flex flex-col sm:flex-row items-center flex-wrap"},se.map((function(e,t){return r.a.createElement("li",{key:t},r.a.createElement(M.c,{to:e.dest,className:le,activeClassName:"border-blue-500 text-blue-500"},e.label))})),r.a.createElement("li",{className:"sm:ml-auto"},r.a.createElement(M.c,{to:"/about",className:le,activeClassName:"border-blue-500 text-blue-500"},"about")))))},me=n(38),de=n.n(me),fe=r.a.createElement(l.a,{store:z},r.a.createElement(M.a,{basename:"/reactHN/"},r.a.createElement("div",null,r.a.createElement(ue,null),r.a.createElement("main",null,r.a.createElement("div",{className:"max-w-screen-lg my-4 mx-auto"},r.a.createElement(q.d,null,r.a.createElement(q.b,{exact:!0,path:"/",component:function(){return r.a.createElement(q.a,{to:"/news/1"})}}),r.a.createElement(q.b,{path:"/item/:id",component:function(){var e=Object(q.g)().id,t=Object(l.b)(),n=Object(l.c)((function(e){return e.items})),c=n.item,o=n.isFetching;return Object(a.useEffect)((function(){D()}),[]),Object(a.useEffect)((function(){e&&t(function(e){return function(){var t=Object(p.a)(f.a.mark((function t(n){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n(T()),k.getItem(e).then((function(t){n(R({id:e,data:t}))})).catch((function(e){console.error(e)}));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(e))}),[e,t]),Object(a.useEffect)((function(){c&&c.title&&$(c.title)}),[c]),r.a.createElement(oe,{item:c,isFetching:o})}}),r.a.createElement(q.b,{path:"/user/:id",component:function(){var e=Object(l.b)(),t=Object(q.g)().id,n=Object(l.c)((function(e){return e})).user;return Object(a.useEffect)((function(){t&&e(function(e){return function(){var t=Object(p.a)(f.a.mark((function t(n){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n(P()),k.getUser(e).then((function(e){n(_(e))})).catch((function(e){console.error(e)}));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(t))}),[t,e]),r.a.createElement(ie,{user:n.user,isFetching:n.isFetching})}}),r.a.createElement(q.b,{path:"/news/:page?",render:function(e){return r.a.createElement(ae,Object.assign({},e,{type:"news"}))}}),r.a.createElement(q.b,{path:"/newest/:page?",render:function(e){return r.a.createElement(ae,Object.assign({},e,{type:"newest"}))}}),r.a.createElement(q.b,{path:"/show/:page?",render:function(e){return r.a.createElement(ae,Object.assign({},e,{type:"show"}))}}),r.a.createElement(q.b,{path:"/ask/:page?",render:function(e){return r.a.createElement(ae,Object.assign({},e,{type:"ask"}))}}),r.a.createElement(q.b,{path:"/jobs/:page?",render:function(e){return r.a.createElement(ae,Object.assign({},e,{type:"jobs"}))}}),r.a.createElement(q.b,{path:"/business/:page?",render:function(e){return r.a.createElement(ae,Object.assign({},e,{type:"business"}))}}),r.a.createElement(q.b,{exact:!0,path:"/about",component:function(){return Object(a.useEffect)((function(){$("about")})),r.a.createElement("div",{className:"About"},r.a.createElement(de.a,{source:"# React Hacker News\n\nYet another React Hacker News clone\n\n[![Commitizen friendly](https://img.shields.io/badge/commitizen-friendly-brightgreen.svg)](http://commitizen.github.io/cz-cli/)\n\n**Demo:** [https://ya-react-hn.vercel.app](https://ya-react-hn.vercel.app)\n\nFeaturing:\n\n- [React 16](https://reactjs.org/)\n- [React Router 4](https://reacttraining.com/react-router)\n- [React Redux](https://redux.js.org/docs/basics/UsageWithReact.html)\n- [Redux Thunk](https://github.com/gaearon/redux-thunk)\n- [HN API](https://github.com/cheeaun/node-hnapi)\n- unread link highlighting\n- clickable links in comments\n- dark mode\n- TailwindCSS\n- Storybook\n- playroom\n"}),r.a.createElement("p",{className:"dark:text-white"},"View the source code on ",r.a.createElement("a",{className:"dark:hover:text-gray-700",href:"https://github.com/ptibbetts/reactHN"},"GitHub")),r.a.createElement("p",{className:"dark:text-white"},r.a.createElement("a",{className:"<3",href:"https://paultibbetts.uk"},r.a.createElement("span",{role:"img","aria-label":"love"},"\ud83d\udc99"))))}}),r.a.createElement(q.b,{component:function(e){var t=e.location;return r.a.createElement("h1",{className:"font-bold text-gray-700 dark:text-white text-2xl"},'Nothing was found for "',t.pathname,'".')}})))))));o.a.render(fe,document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("https://franz101.github.io/reactHN",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("https://franz101.github.io/reactHN","/service-worker.js");i?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var a=n.headers.get("content-type");404===n.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):s(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):s(t,e)}))}}()},40:function(e,t,n){e.exports=n(104)},45:function(e,t,n){}},[[40,1,2]]]);
//# sourceMappingURL=main.0c763842.chunk.js.map